<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>NovaSta - Instagram Clone</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap');
    :root{
      --purple:#9b59b6;
      --black:#0d0d0d;
      --gray:#1a1a1a;
      --text:#ecf0f1;
      --soft:#bdc3c7;
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:'Roboto',sans-serif}
    body{background:var(--black);color:var(--text);overflow-x:hidden}
    /* ---------- PARTICLE BG ---------- */
    #particles{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1}
    /* ---------- AUTH ---------- */
    .auth-screen{position:fixed;inset:0;background:var(--black);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}
    .auth-box{width:360px;background:var(--gray);border:1px solid var(--purple);border-radius:12px;padding:30px}
    .auth-title{text-align:center;font-size:26px;color:var(--purple);margin-bottom:20px}
    .auth-input{width:100%;padding:12px;margin:8px 0;background:#0d0d0d;border:1px solid #444;color:var(--text);border-radius:6px}
    .auth-btn{width:100%;padding:12px;margin-top:10px;background:var(--purple);color:#fff;border:none;border-radius:6px;font-weight:bold;cursor:pointer}
    .auth-btn:hover{filter:brightness(1.2)}
    .auth-switch{text-align:center;margin-top:12px;font-size:13px;color:var(--soft);cursor:pointer}
    .auth-switch:hover{text-decoration:underline}
    /* ---------- MAIN APP ---------- */
    .app{display:none;flex-direction:column;height:100vh}
    .top-bar{display:flex;align-items:center;justify-content:space-between;padding:10px 20px;background:var(--gray);border-bottom:1px solid var(--purple)}
    .logo{font-size:22px;color:var(--purple);font-weight:bold}
    .icons{display:flex;gap:15px;font-size:20px;cursor:pointer}
    .main-content{flex:1;display:flex;overflow:hidden}
    .left{width:250px;background:var(--gray);border-right:1px solid var(--purple);padding:15px;display:flex;flex-direction:column;gap:15px}
    .menu-item{padding:10px;border-radius:6px;cursor:pointer;transition:background .2s}
    .menu-item:hover{background:#2c2c2c}
    .center{flex:1;padding:20px;overflow-y:auto}
    .right{width:250px;background:var(--gray);border-left:1px solid var(--purple);padding:15px}
    .story-box{display:flex;gap:10px;padding:10px;border:1px solid #444;border-radius:8px;margin-bottom:20px;overflow-x:auto}
    .story{width:60px;height:60px;border-radius:50%;border:2px solid var(--purple);object-fit:cover;cursor:pointer}
    .post-card{background:#1a1a1a;border:1px solid #444;border-radius:8px;margin-bottom:20px}
    .post-header{display:flex;align-items:center;padding:10px;gap:10px}
    .post-avatar{width:32px;height:32px;border-radius:50%;object-fit:cover}
    .post-img{width:100%;max-height:500px;object-fit:cover}
    .post-actions{display:flex;gap:15px;padding:10px;font-size:20px}
    .post-likes{font-size:14px;padding:0 10px 10px}
    .post-caption{font-size:14px;padding:0 10px 10px}
    .comment-box{display:flex;padding:0 10px 10px;gap:6px}
    .comment-input{flex:1;padding:6px;background:#0d0d0d;border:1px solid #444;color:var(--text);border-radius:4px;font-size:13px}
    .comment-btn{padding:6px 10px;background:var(--purple);color:#fff;border:none;border-radius:4px;cursor:pointer}
    .comments{padding:0 10px 10px;font-size:13px;color:var(--soft)}
    /* ---------- PROFILE ---------- */
    .profile-top{display:flex;align-items:center;gap:20px;padding:20px}
    .profile-avatar{width:80px;height:80px;border-radius:50%;object-fit:cover;border:2px solid var(--purple)}
    .profile-info{flex:1}
    .profile-name{font-size:20px;font-weight:bold}
    .profile-bio{font-size:14px;color:var(--soft);margin-top:4px}
    .profile-stats{display:flex;gap:20px;margin-top:10px;font-size:14px}
    .profile-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:3px;margin-top:20px}
    .grid-img{width:100%;aspect-ratio:1;object-fit:cover;border:1px solid #444}
    /* ---------- SETTINGS ---------- */
    .settings-card{background:#1a1a1a;border:1px solid #444;border-radius:8px;padding:20px;margin-bottom:20px}
    .settings-title{font-size:18px;color:var(--purple);margin-bottom:10px}
    .settings-row{display:flex;justify-content:space-between;align-items:center;margin:10px 0}
    .settings-btn{padding:6px 12px;background:var(--purple);color:#fff;border:none;border-radius:4px;cursor:pointer}
    /* ---------- STORY VIEW ---------- */
    .story-view{position:fixed;inset:0;background:#000;display:none;flex-direction:column;align-items:center;justify-content:center;z-index:2000}
    .story-img{max-width:90%;max-height:80%;border-radius:12px}
    .story-close{position:absolute;top:20px;right:20px;font-size:30px;color:#fff;cursor:pointer}
    /* ---------- VIDEO RECORD ---------- */
    .video-record{position:fixed;inset:0;background:#000;display:none;flex-direction:column;align-items:center;justify-content:center;z-index:2000}
    .video-preview{width:90%;max-height:60%;border-radius:12px}
    .video-controls{display:flex;gap:15px;margin-top:15px}
    .rec-btn{padding:10px 20px;background:var(--purple);color:#fff;border:none;border-radius:6px;cursor:pointer}
    /* ---------- FOOTER ---------- */
    footer{text-align:center;padding:12px;font-size:12px;color:var(--soft);background:var(--gray);border-top:1px solid var(--purple)}
  </style>
</head>
<body>

<!-- ========== AUTH ========== -->
<div class="auth-screen" id="authScreen">
  <div class="auth-box">
    <div class="auth-title" id="authTitle">NovaSta Giri≈ü</div>
    <input class="auth-input" id="username" placeholder="Kullanƒ±cƒ± adƒ±">
    <input class="auth-input" id="password" type="password" placeholder="≈ûifre">
    <button class="auth-btn" onclick="authAction()">Giri≈ü Yap</button>
    <div class="auth-switch" onclick="toggleAuth()">Hesabƒ±n yok mu? Kayƒ±t ol</div>
  </div>
</div>

<!-- ========== APP ========== -->
<div class="app" id="app">
  <div class="top-bar">
    <div class="logo">NovaSta</div>
    <div class="icons">
      <span onclick="showSection('home')">üè†</span>
      <span onclick="showSection('upload')">‚ûï</span>
      <span onclick="showSection('profile')">üë§</span>
      <span onclick="showSection('settings')">‚öôÔ∏è</span>
      <span onclick="logout()">üö™</span>
    </div>
  </div>

  <div class="main-content">
    <!-- LEFT MENU -->
    <div class="left">
      <div class="menu-item" onclick="showSection('home')">Ana Sayfa</div>
      <div class="menu-item" onclick="showSection('explore')">Ke≈üfet</div>
      <div class="menu-item" onclick="showSection('reels')">Reels</div>
      <div class="menu-item" onclick="showSection('messages')">Mesajlar</div>
      <div class="menu-item" onclick="showSection('notifications')">Bildirimler</div>
      <div class="menu-item" onclick="showSection('saved')">Kaydedilenler</div>
      <hr style="border-color:#444;margin:10px 0">
      <div id="accountSwitcher"></div>
    </div>

    <!-- CENTER -->
    <div class="center" id="centerContent"></div>

    <!-- RIGHT -->
    <div class="right">
      <div class="settings-card">
        <div class="settings-title">Hikayeler</div>
        <div id="storyList"></div>
      </div>
    </div>
  </div>

  <!-- STORY VIEWER -->
  <div class="story-view" id="storyView">
    <img class="story-img" id="storyImg">
    <div class="story-close" onclick="closeStory()">‚úñ</div>
  </div>

  <!-- VIDEO RECORDER -->
  <div class="video-record" id="videoRecord">
    <video class="video-preview" id="videoPreview" autoplay muted></video>
    <div class="video-controls">
      <button class="rec-btn" onclick="startRecording()">Kaydƒ± Ba≈ülat</button>
      <button class="rec-btn" onclick="stopRecording()">Kaydƒ± Bitir</button>
      <button class="rec-btn" onclick="closeRecorder()">Kapat</button>
    </div>
  </div>

  <!-- ========== FOOTER ========== -->
  <footer>
    Created by R√ºzgar
  </footer>

<script>
// ---------- GLOBAL ----------
const maxAccounts = 5;
let currentUser = null;
let currentAccountIndex = 0;
let accounts = [];
let posts = [];
let stories = [];
let mediaRecorder;
let recordedChunks = [];

// ---------- UTILS ----------
const $ = id => document.getElementById(id);
const show = (id, display = 'block') => $(id).style.display = display;
const hide = id => $(id).style.display = 'none';

// ---------- AUTH ----------
function loadAccounts() {
  const raw = localStorage.getItem('novasta_accounts');
  accounts = raw ? JSON.parse(raw) : [];
}
function saveAccounts() {
  localStorage.setItem('novasta_accounts', JSON.stringify(accounts));
}
function toggleAuth() {
  const title = $('authTitle');
  const btn = $('username').nextElementSibling;
  if (title.textContent.includes('Giri≈ü')) {
    title.textContent = 'NovaSta Kayƒ±t';
    btn.textContent = 'Kayƒ±t Ol';
    btn.onclick = () => authAction('register');
    $('username').nextElementSibling.nextElementSibling.textContent = 'Zaten hesabƒ±n var mƒ±? Giri≈ü yap';
  } else {
    title.textContent = 'NovaSta Giri≈ü';
    btn.textContent = 'Giri≈ü Yap';
    btn.onclick = () => authAction('login');
    $('username').nextElementSibling.nextElementSibling.textContent = 'Hesabƒ±n yok mu? Kayƒ±t ol';
  }
}
function authAction(mode) {
  const user = $('username').value.trim();
  const pass = $('password').value.trim();
  if (!user || !pass) return alert('Bo≈ü bƒ±rakƒ±lamaz');
  loadAccounts();
  if (mode === 'register') {
    if (accounts.length >= maxAccounts) return alert('Max 5 hesap');
    if (accounts.find(a => a.username === user)) return alert('Kullanƒ±cƒ± adƒ± alƒ±nmƒ±≈ü');
    accounts.push({username:user, password:pass, avatar:'', bio:'', posts:[], saved:[], following:[], followers:[]});
    saveAccounts();
    alert('Kayƒ±t ba≈üarƒ±lƒ±');
    toggleAuth();
  } else {
    const acc = accounts.find(a => a.username === user && a.password === pass);
    if (!acc) return alert('Bilgiler yanlƒ±≈ü');
    currentUser = acc;
    currentAccountIndex = accounts.indexOf(acc);
    initApp();
  }
}
function logout() {
  if (!confirm('√áƒ±kƒ±≈ü yapmak istiyor musun?')) return;
  currentUser = null;
  accounts = [];
  hide('app');
  show('authScreen');
}

// ---------- APP ----------
function initApp() {
  hide('authScreen');
  show('app');
  buildAccountSwitcher();
  showSection('home');
  buildStoryList();
}
function buildAccountSwitcher() {
  const box = $('accountSwitcher');
  box.innerHTML = '<div style="font-size:12px;color:var(--soft);margin-bottom:6px">Hesap Deƒüi≈ütir</div>';
  accounts.forEach((a, i) => {
    const div = document.createElement('div');
    div.className = 'menu-item';
    div.textContent = a.username;
    div.onclick = () => switchAccount(i);
    box.appendChild(div);
  });
}
function switchAccount(index) {
  currentAccountIndex = index;
  currentUser = accounts[index];
  showSection('home');
  buildStoryList();
}

// ---------- SECTIONS ----------
function showSection(sec) {
  const c = $('centerContent');
  c.innerHTML = '';
  switch(sec) {
    case 'home': return buildHome();
    case 'upload': return buildUpload();
    case 'profile': return buildProfile();
    case 'settings': return buildSettings();
    case 'explore': return buildExplore();
    case 'reels': return buildReels();
    case 'messages': return buildMessages();
    case 'notifications': return buildNotifications();
    case 'saved': return buildSaved();
  }
}

// ---------- HOME ----------
function buildHome() {
  const c = $('centerContent');
  // Stories
  const storyBox = document.createElement('div');
  storyBox.className = 'story-box';
  accounts.forEach(acc => {
    if (acc.stories && acc.stories.length) {
      const img = document.createElement('img');
      img.className = 'story';
      img.src = acc.stories[0];
      img.onclick = () => openStory(acc.username, 0);
      storyBox.appendChild(img);
    }
  });
  c.appendChild(storyBox);
  // Posts
  const allPosts = [];
  accounts.forEach(acc => allPosts.push(...acc.posts.map(p => ({...p, owner:acc.username}))));
  allPosts.sort((a,b) => b.date - a.date);
  allPosts.forEach(p => c.appendChild(buildPostCard(p)));
}

// ---------- POST CARD ----------
function buildPostCard(p) {
  const card = document.createElement('div');
  card.className = 'post-card';
  card.innerHTML = `
    <div class="post-header">
      <img class="post-avatar" src="${accounts.find(a=>a.username===p.owner)?.avatar||'#'}" onclick="showProfile('${p.owner}')">
      <div><div class="profile-name">${p.owner}</div></div>
    </div>
    <img class="post-img" src="${p.img}" alt="post">
    <div class="post-actions">
      <span onclick="toggleLike('${p.owner}', '${p.id}')">‚ù§Ô∏è</span>
      <span onclick="focusComment('${p.owner}', '${p.id}')">üí¨</span>
      <span onclick="savePost('${p.owner}', '${p.id}')">üîñ</span>
    </div>
    <div class="post-likes">${p.likes.length} beƒüeni</div>
    <div class="post-caption">${p.caption}</div>
    <div class="comments" id="comments-${p.owner}-${p.id}"></div>
    <div class="comment-box">
      <input class="comment-input" id="commentInp-${p.owner}-${p.id}" placeholder="Yorum yaz...">
      <button class="comment-btn" onclick="addComment('${p.owner}', '${p.id}')">G√∂nder</button>
    </div>
  `;
  // Yorumlarƒ± doldur
  const cmtBox = card.querySelector(`#comments-${p.owner}-${p.id}`);
  p.comments.forEach(c => {
    const div = document.createElement('div');
    div.textContent = `${c.user}: ${c.text}`;
    cmtBox.appendChild(div);
  });
  return card;
}

// ---------- UPLOAD ----------
function buildUpload() {
  const c = $('centerContent');
  c.innerHTML = `
    <div class="settings-card">
      <div class="settings-title">Fotoƒüraf Y√ºkle</div>
      <input type="file" id="postFile" accept="image/*">
      <br><br>
      <textarea id="postCaption" class="auth-input" placeholder="A√ßƒ±klama" rows="3"></textarea>
      <button class="auth-btn" onclick="uploadPost()">Payla≈ü</button>
    </div>
    <div class="settings-card">
      <div class="settings-title">Hikaye Ekle</div>
      <input type="file" id="storyFile" accept="image/*">
      <br><br>
      <button class="auth-btn" onclick="uploadStory()">Hikaye Payla≈ü</button>
    </div>
    <div class="settings-card">
      <div class="settings-title">Reels (Video) Kaydet</div>
      <button class="auth-btn" onclick="openRecorder()">Kamerayƒ± A√ß</button>
    </div>
  `;
}
function uploadPost() {
  const file = $('postFile').files[0];
  const cap = $('postCaption').value.trim();
  if (!file) return alert('Fotoƒüraf se√ß');
  const reader = new FileReader();
  reader.onload = e => {
    currentUser.posts.unshift({id:Date.now(),img:e.target.result,caption:cap,likes:[],comments:[],date:Date.now()});
    saveAccounts();
    alert('Payla≈üƒ±ldƒ±');
    showSection('home');
  };
  reader.readAsDataURL(file);
}
function uploadStory() {
  const file = $('storyFile').files[0];
  if (!file) return alert('Hikaye se√ß');
  const reader = new FileReader();
  reader.onload = e => {
    currentUser.stories = [e.target.result];
    saveAccounts();
    alert('Hikaye eklendi');
    buildStoryList();
  };
  reader.readAsDataURL(file);
}

// ---------- PROFILE ----------
function buildProfile() {
  const c = $('centerContent');
  c.innerHTML = `
    <div class="profile-top">
      <img class="profile-avatar" src="${currentUser.avatar||'#'}" id="profileAvatar" onclick="changeAvatar()">
      <div class="profile-info">
        <div class="profile-name">${currentUser.username}</div>
        <div class="profile-bio">${currentUser.bio||'Biyografi yok'}</div>
        <div class="profile-stats">
          <div><b>${currentUser.posts.length}</b> g√∂nderi</div>
          <div><b>${currentUser.followers.length}</b> takip√ßi</div>
          <div><b>${currentUser.following.length}</b> takip</div>
        </div>
      </div>
    </div>
    <div class="profile-grid" id="profileGrid"></div>
  `;
  const grid = $('profileGrid');
  currentUser.posts.forEach(p => {
    const img = document.createElement('img');
    img.className = 'grid-img';
    img.src = p.img;
    grid.appendChild(img);
  });
}
function changeAvatar() {
  const inp = document.createElement('input');
  inp.type = 'file';
  inp.accept = 'image/*';
  inp.onchange = e => {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = ev => {
      currentUser.avatar = ev.target.result;
      saveAccounts();
      buildProfile();
    };
    reader.readAsDataURL(file);
  };
  inp.click();
}

// ---------- SETTINGS ----------
function buildSettings() {
  const c = $('centerContent');
  c.innerHTML = `
    <div class="settings-card">
      <div class="settings-title">Tema</div>
      <div class="settings-row">
        <span>Parlaklƒ±k</span>
        <input type="range" min="50" max="150" value="100" oninput="setBrightness(this.value)">
      </div>
      <div class="settings-row">
        <span>Partik√ºl Hƒ±zƒ±</span>
        <input type="range" min="1" max="10" value="5" oninput="setParticleSpeed(this.value)">
      </div>
    </div>
    <div class="settings-card">
      <div class="settings-title">Hesap</div>
      <button class="settings-btn" onclick="changeBio()">Biyografi Deƒüi≈ütir</button>
      <button class="settings-btn" onclick="logout()">√áƒ±kƒ±≈ü Yap</button>
    </div>
  `;
}
function setBrightness(val){document.body.style.filter=`brightness(${val}%)`}
function setParticleSpeed(val){window.particleSpeed=11-val}

// ---------- STORY ----------
function buildStoryList() {
  const box = $('storyList');
  box.innerHTML = '';
  accounts.forEach(acc => {
    if (acc.stories && acc.stories.length) {
      const img = document.createElement('img');
      img.className = 'story';
      img.src = acc.stories[0];
      img.onclick = () => openStory(acc.username, 0);
      box.appendChild(img);
    }
  });
}
function openStory(user, index) {
  const acc = accounts.find(a => a.username === user);
  if (!acc || !acc.stories[index]) return;
  $('storyImg').src = acc.stories[index];
  show('storyView', 'flex');
}
function closeStory() {
  hide('storyView');
}

// ---------- VIDEO RECORDER ----------
function openRecorder() {
  show('videoRecord', 'flex');
  navigator.mediaDevices.getUserMedia({video:true,audio:true})
    .then(stream => {
      $('videoPreview').srcObject = stream;
      window.stream = stream;
    })
    .catch(err => alert('Kamera izni gerekli'));
}
function closeRecorder() {
  hide('videoRecord');
  if (window.stream) window.stream.getTracks().forEach(t => t.stop());
}
function startRecording() {
  recordedChunks = [];
  mediaRecorder = new MediaRecorder(window.stream);
  mediaRecorder.ondataavailable = e => recordedChunks.push(e.data);
  mediaRecorder.start();
  alert('Kayƒ±t ba≈üladƒ±');
}
function stopRecording() {
  mediaRecorder.stop();
  mediaRecorder.onstop = () => {
    const blob = new Blob(recordedChunks, {type:'video/mp4'});
    const url = URL.createObjectURL(blob);
    currentUser.posts.unshift({id:Date.now(),img:url,caption:'Reels video',likes:[],comments:[],date:Date.now()});
    saveAccounts();
    alert('Reels payla≈üƒ±ldƒ±');
    closeRecorder();
    showSection('home');
  };
}

// ---------- LIKES / COMMENTS / SAVE ----------
function toggleLike(owner, postId) {
  const acc = accounts.find(a => a.username === owner);
  const p = acc.posts.find(pp => pp.id == postId);
  const idx = p.likes.indexOf(currentUser.username);
  if (idx > -1) p.likes.splice(idx, 1); else p.likes.push(currentUser.username);
  saveAccounts();
  showSection('home');
}
function addComment(owner, postId) {
  const acc = accounts.find(a => a.username === owner);
  const p = acc.posts.find(pp => pp.id == postId);
  const inp = $(`commentInp-${owner}-${postId}`);
  const txt = inp.value.trim();
  if (!txt) return;
  p.comments.push({user:currentUser.username, text:txt});
  inp.value = '';
  saveAccounts();
  showSection('home');
}
function savePost(owner, postId) {
  const acc = accounts.find(a => a.username === owner);
  const p = acc.posts.find(pp => pp.id == postId);
  if (currentUser.saved.includes(postId)) currentUser.saved = currentUser.saved.filter(id => id != postId);
  else currentUser.saved.push(postId);
  saveAccounts();
  alert(currentUser.saved.includes(postId) ? 'Kaydedildi' : 'Kayƒ±t kaldƒ±rƒ±ldƒ±');
}
function focusComment(owner, postId) {
  $(`commentInp-${owner}-${postId}`).focus();
}

// ---------- SECTION PLACEHOLDERS ----------
function buildExplore() {$('centerContent').innerHTML='<div class="settings-card">Ke≈üfet yakƒ±nda!</div>';}
function buildReels() {$('centerContent').innerHTML='<div class="settings-card">Reels yakƒ±nda!</div>';}
function buildMessages() {$('centerContent').innerHTML='<div class="settings-card">Mesajlar yakƒ±nda!</div>';}
function buildNotifications() {$('centerContent').innerHTML='<div class="settings-card">Bildirimler yakƒ±nda!</div>';}
function buildSaved() {
  const c = $('centerContent');
  c.innerHTML = '<div class="settings-title">Kaydedilenler</div>';
  currentUser.saved.forEach(id => {
    const [owner, pid] = id.split('-');
    const acc = accounts.find(a => a.username === owner);
    const p = acc?.posts.find(pp => pp.id == pid);
    if (p) c.appendChild(buildPostCard(p));
  });
}
function changeBio() {
  const b = prompt('Yeni biyografi:', currentUser.bio || '');
  if (b === null) return;
  currentUser.bio = b;
  saveAccounts();
  buildProfile();
}

// ---------- PARTICLES ----------
const canvas = document.createElement('canvas');
canvas.id = 'particles';
document.body.appendChild(canvas);
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
let particleSpeed = 5;
const particles = [];
for (let i = 0; i < 80; i++) particles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,size:Math.random()*2+1,speedX:(Math.random()-.5)*particleSpeed/5,speedY:(Math.random()-.5)*particleSpeed/5});
function animateParticles() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = '#9b59b6';
  for (let p of particles) {
    p.x += p.speedX; p.y += p.speedY;
    if (p.x > canvas.width || p.x < 0) p.speedX *= -1;
    if (p.y > canvas.height || p.y < 0) p.speedY *= -1;
    ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI*2); ctx.fill();
  }
  requestAnimationFrame(animateParticles);
}
animateParticles();
window.addEventListener('resize', () => {canvas.width = window.innerWidth; canvas.height = window.innerHeight;});

// ---------- INIT ----------
loadAccounts();
if (accounts.length > 0) {
  currentUser = accounts[0];
  currentAccountIndex = 0;
  initApp();
} else {
  show('authScreen');
}
</script>
</body>
</html>
